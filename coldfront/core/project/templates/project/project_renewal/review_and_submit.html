{% extends "common/base.html" %}
{% load crispy_forms_tags %}
{% load static %}


{% block title %}
Project Renewal - Review and Submit
{% endblock %}


{% block head %}
{{ wizard.form.media }}
{% endblock %}


{% block content %}
<h1>Review and Submit</h1><hr>

<ol class="breadcrumb">
  <li>PI: {{ PI.user.username}}, Current Project: {{ current_project }}</li>
  <li>&nbsp;<i class="fas fa-angle-double-right"></i>&nbsp;</li>
  <li>Preference: {{ breadcrumb_pooling_preference }}</li>
  <li>&nbsp;<i class="fas fa-angle-double-right"></i>&nbsp;</li>
  <li>Requested Project: {{ requested_project }}</li>
</ol>

<p>
  Review your selections and submit.
</p>

<div class="table-responsive">
  <table class="table table-sm">
    <tbody>
      <tr>
        <th>Principal Investigator (PI)</th>
        <td>Matthew Li (meli@lbl.gov)</td>
      </tr>
      <tr>
        <th>PI's Current Project</th>
        <td>{{ current_project }}</td>
      </tr>
      <tr>
        <th>Updated Project Choice</th>
        <td>{{ requested_project }}</td>
      </tr>
      <tr>
        <th>Number of Service Units</th>
        <td>TODO: XXX,XXX</td>
      </tr>
    </tbody>
  </table>
</div>


<p>
  The following changes will occur if the request is approved:
</p>
<ol>
  <li>TODO: Fill this in.</li>
  <li>TODO: Fill this in.</li>
  <li>
    Requested Project {{ requested_project }} will be granted XXX,XXX (TODO)
    service units. (Note that this number may be prorated based on when the
    request is approved.)
  </li>
</ol>


<form action="" method="post">
  {% csrf_token %}
  <table>
    {{ wizard.management_form }}
    {% if wizard.form.forms %}
      {{ wizard.form.management_form }}
      {% for form in wizard.form.forms %}
        {{ form|crispy }}
      {% endfor %}
    {% else %}
      {{ wizard.form|crispy }}
    {% endif %}
  </table>
  {% if wizard.steps.prev %}
    <button
        class="btn btn-secondary"
        formnovalidate="formnovalidate"
        name="wizard_goto_step"
        type="submit"
        value="{{ wizard.steps.first }}">
      First Step
    </button>
    <button
        class="btn btn-secondary"
        formnovalidate="formnovalidate"
        name="wizard_goto_step"
        type="submit"
        value="{{ wizard.steps.prev }}">
      Previous Step
    </button>
  {% endif %}
  <input class="btn btn-primary" type="submit" value="Submit"/>
</form>
<br>

<p>Step {{ wizard.steps.step1 }} of {{ wizard.steps.count }}</p>

{% endblock %}
