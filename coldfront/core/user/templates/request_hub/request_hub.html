{% extends "common/base.html" %} {% load common_tags %} {% block content %}

<div class="row">
  <div class="col-lg-12">
    <h2>Request Hub</h2>
    <hr>

    <p>Below are all your active requests. To view your completed requests, click to view completed requests in the appropriate section</p>
  </div>
</div>


  {% with request_obj=cluster_account_request_obj %}
    {% include 'request_hub/request_section.html' %}
  {% endwith %}

  {% with request_obj=project_removal_request_obj %}
    {% include 'request_hub/request_section.html' %}
  {% endwith %}

  {% with request_obj=savio_project_request_obj %}
    {% include 'request_hub/request_section.html' %}
  {% endwith %}

  <script>
    {# set variables to be used for scroll position #}
      window.onbeforeunload = function(e) {
          localStorage.setItem('scrollpos', window.scrollY);
          localStorage.setItem('resetpos', true);
      };

      $("#navbar-main > ul > li.active").removeClass("active");
      $("#navbar-request-hub").addClass("active");

      $(document).ready(function () {
          {# maintains collapse status on reload #}
          $(".collapse").on("shown.bs.collapse", function () {
              localStorage.setItem("coll_" + this.id, true);
          });

          $(".collapse").on("hidden.bs.collapse", function () {
              localStorage.removeItem("coll_" + this.id);
          });

          $(".collapse").each(function () {
              if (localStorage.getItem("coll_" + this.id) === "true") {
                  $(this).collapse("show");
              }
              else {
                  $(this).collapse("hide");
              }
          });

          {# maintains scroll position on reload #}
          var scrollpos = localStorage.getItem('scrollpos');
          var resetpos = localStorage.getItem('resetpos');
          if (scrollpos && resetpos) window.scrollTo(0, scrollpos);

      });
  </script>

{% endblock %}
