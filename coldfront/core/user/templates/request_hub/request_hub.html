{% extends "common/base.html" %} {% load common_tags %} {% block content %}

<div class="row">
  <div class="col-lg-12">
    <h1>Request Hub</h1>
    <hr>
    {% if show_all %}
      <p>
        Below are all of the requests in the myBRC Portal. Click on a request
        section to view requests of that type. To perform actions on a specific request,
        click the button to go to the request's main page and perform the actions there.
        Click <a href="{% url 'request-hub' %}">here</a> to view only your requests.
      </p>
    {% else %}
      <p>
        Below are all of your requests in the myBRC Portal. Click on a request
        section to view your requests of that type.

      {% if admin_staff %}
          Click <a href="{% url 'request-hub-admin' %}">here</a> to view all requests in the myBRC Portal.
      {% endif %}
      </p>
    {% endif %}
  <hr>
  </div>
</div>


  {% with request_obj=cluster_account_request_obj %}
    {% include 'request_hub/request_section.html' %}
  {% endwith %}

  {% with request_obj=project_join_request_obj %}
    {% include 'request_hub/request_section.html' %}
  {% endwith %}

  {% with request_obj=project_removal_request_obj %}
    {% include 'request_hub/request_section.html' %}
  {% endwith %}

  {% with request_obj=project_renewal_request_obj %}
    {% include 'request_hub/request_section.html' %}
  {% endwith %}

  {% with request_obj=savio_project_request_obj %}
    {% include 'request_hub/request_section.html' %}
  {% endwith %}

  {% with request_obj=su_purchase_request_obj %}
    {% include 'request_hub/request_section.html' %}
  {% endwith %}

  {% with request_obj=vector_project_request_obj %}
    {% include 'request_hub/request_section.html' %}
  {% endwith %}

  <script>
    {# set variables to be used for scroll position #}
      window.onbeforeunload = function(e) {
          localStorage.setItem('scrollpos', window.scrollY);
          localStorage.setItem('resetpos', true);
      };

      $("#navbar-main > ul > li.active").removeClass("active");
      $("#navbar-request-hub").addClass("active");

      $(document).ready(function () {
          {# maintains collapse status on reload #}
          $(".collapse").on("shown.bs.collapse", function () {
              localStorage.setItem("coll_" + this.id, true);
          });

          $(".collapse").on("hidden.bs.collapse", function () {
              localStorage.removeItem("coll_" + this.id);
          });

          $(".collapse").each(function () {
              if (localStorage.getItem("coll_" + this.id) === "true") {
                  $(this).collapse("show");
              }
              else {
                  $(this).collapse("hide");
              }
          });

          {# maintains scroll position on reload #}
          var scrollpos = localStorage.getItem('scrollpos');
          var resetpos = localStorage.getItem('resetpos');
          if (scrollpos && resetpos) window.scrollTo(0, scrollpos);

      });
  </script>

{% endblock %}
