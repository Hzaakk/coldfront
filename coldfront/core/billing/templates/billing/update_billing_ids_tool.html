{% load static %}


<style>
  .validating-tooltip {
    position: absolute;
    top: 100%;
    z-index: 5;
    max-width: 100%;
    padding: .25rem .5rem;
    margin-top: .1rem;
    font-size: .875rem;
    line-height: 1.5;
    color: #000;
    background-color: #ffc107;
    border-radius: .25rem;
  }
</style>


<p>
  Apply an action to the <i>selected</i> users. Changes will not be saved until
  the "Save changes" button is clicked.
</p>
<form id="applyActionForm">
  <div class="form-row">
    <div class="col-md-2 mb-3">
      <label for="selectAction">Select an action</label>
      <select class="form-control" id="selectAction">
        <option value="find_and_replace">Find and replace</option>
        <option value="set_to">Set to</option>
      </select>
    </div>
    <div class="col-md-2 mb-3" id="findInput">
      <label for="currentProjectId">Current Project ID</label>
      <input class="form-control" id="currentProjectId" placeholder="123456-789" type="text">
    </div>
    <div class="col-md-2 mb-3">
      <label for="updatedProjectId">Updated Project ID</label>
      <input class="form-control" id="updatedProjectId" maxlength="10" placeholder="123456-789" type="text">
      <div class="valid-tooltip">
        Valid
      </div>
      <div class="invalid-tooltip">
        Invalid
      </div>
      <div class="validating-tooltip" id="validating-tooltip" style="display: none;">
        Validating...
      </div>
    </div>
    <div class="col-md-6 mb-3">
      <br>
      {% comment %} Avoid hard-coding the margin. {% endcomment %}
      <button class="btn btn-primary" type="submit" style="margin-top: 8px;">Apply</button>
    </div>
  </div>
</form>
<hr>
<br>

<div class="table-responsive">
  <table class="table table-sm table-hover" id="updateUserFormsTable">
    <thead>
      <tr>
        <th><input type="checkbox" class="check" id="selectAll"></th>
        <th scope="col">Name</th>
        <th scope="col">Email</th>
        <th scope="col">Username</th>
        <th scope="col">Current Project ID</th>
        <th scope="col">Updated Project ID</th>
      </tr>
    </thead>
    <tbody>
      {% for form in formset %}
      <tr>
        <td>{{ form.selected }}</td>
        <td>{{ form.name.value }}</td>
        <td>{{ form.email.value }}</td>
        <td>{{ form.username.value }}</td>
        <td>{{ form.current_billing_id.value }}</td>
        <td>{{ form.updated_billing_id }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{{ formset.management_form }}


<button class="btn btn-primary">Save changes</button>


<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js" integrity="sha512-bZS47S7sPOxkjU/4Bt0zrhEtWx0y0CRkhEp8IckzK+ltifIIE9EMIMTuT/mEzoIMewUINruDBIR/jJnbguonqQ==" crossorigin="anonymous"></script>
<script src="{% static 'core/billing/js/update_billing_ids_tool.js' %}" type="text/javascript"></script>
