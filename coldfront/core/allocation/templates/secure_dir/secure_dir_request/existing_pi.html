{% extends "common/base.html" %}
{% load crispy_forms_tags %}
{% load static %}


{% block title %}
  Secure Directory Request: Principal Investigator
{% endblock %}


{% block head %}
  {{ wizard.form.media }}
{% endblock %}


{% block content %}
  <script type="text/javascript" src="{% static 'common/js/leave_form_alert.js' %}"></script>
  <script type='text/javascript' src="{% static 'selectize/selectize.min.js' %}"></script>
  <link rel='stylesheet' type='text/css' href="{% static 'selectize/selectize.bootstrap3.css' %}"/>

  <h1>Secure Directory: Principal Investigator</h1><hr>

  <ol class="breadcrumb">
    <li>RDM Consult: {{ breadcrumb_rdm_consultation }}</li>
  </ol>

  <p>Select an existing Principal Investigator for this directory. You may search
    for the user in the selection field. If the desired user is not listed, you
    may skip this step and specify information for a new PI in the next step.</p>

  <form action="" method="post">
    {% csrf_token %}
    <table>
      {{ wizard.management_form }}
      {% if wizard.form.forms %}
        {{ wizard.form.management_form }}
        {% for form in wizard.form.forms %}
          {{ form|crispy }}
        {% endfor %}
      {% else %}
        {{ wizard.form|crispy }}
      {% endif %}
    </table>
    {% if wizard.steps.prev %}
      <button
              class="btn btn-secondary"
              formnovalidate="formnovalidate"
              name="wizard_goto_step"
              type="submit"
              value="{{ wizard.steps.first }}">
        First Step
      </button>
      <button
              class="btn btn-secondary"
              formnovalidate="formnovalidate"
              name="wizard_goto_step"
              type="submit"
              value="{{ wizard.steps.prev }}">
        Previous Step
      </button>
    {% endif %}
    <input class="btn btn-primary" type="submit" value="Next Step"/>
  </form>
  <br>

  <p>Step {{ wizard.steps.step1 }} of {{ wizard.steps.count }}</p>

  <script>
      $('select').selectize({
          create: false,
          sortField: 'text'
      })
  </script>

{% endblock %}
